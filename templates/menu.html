{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<!-- SEO Meta Tags -->
	<title>{% if restaurant %}{{ restaurant.name }} - Меню{% else %}Меню ресторана{% endif %}</title>
	<meta name="description" content="{% if restaurant %}{{ restaurant.description|default:'Онлайн меню ресторана' }}{% else %}Онлайн меню ресторана{% endif %}">
	<meta name="keywords" content="меню, ресторан, еда, доставка{% if restaurant %}, {{ restaurant.name }}{% endif %}">
	<meta name="author" content="{% if restaurant %}{{ restaurant.name }}{% else %}QR Menu{% endif %}">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:title" content="{% if restaurant %}{{ restaurant.name }} - Меню{% else %}Меню ресторана{% endif %}">
	<meta property="og:description" content="{% if restaurant %}{{ restaurant.description|default:'Онлайн меню ресторана' }}{% else %}Онлайн меню ресторана{% endif %}">
	{% if restaurant and restaurant.image %}
	<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ restaurant.image.url }}">
	{% endif %}

	<!-- Twitter -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="{% if restaurant %}{{ restaurant.name }} - Меню{% else %}Меню ресторана{% endif %}">

	<!-- Favicon -->
	<link rel="icon" type="image/png" href="{% if restaurant and restaurant.image %}{{ restaurant.image.url }}{% else %}{% static 'images/favicon.png' %}{% endif %}">

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<!-- Bootstrap Bundle JS -->
	<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Custom Styles -->
	<link rel="stylesheet" href="{% static 'css/style.css' %}">

	<script>
        // URL конфигурация
        var loadDishesUrl = "{% url 'load_dishes' 0 %}";
        var addToCartUrl = "{% url 'add_to_cart' 0 %}";
        var getCartUrl = "{% url 'get_cart' %}";
	</script>
</head>

<body class="container">
{% block content %}
{% endblock %}

{% block dashboard %}
	<div class="fixed-header">
		<!-- Логотип ресторана -->
		<img src="{{ restaurant.image.url }}" alt="{{ restaurant.name }}" id="restaurant-logo"
		     class="restaurant-banner">

		<!-- Ряд с корзиной и социальными сетями -->
		<div class="menu-header d-flex justify-content-between align-items-center">
			<a href="{% url 'view_cart' %}" class="cart-link text-dark position-relative">
				<i class="fas fa-shopping-cart shopping-cart-lg"></i>
				<span id="cart-count"
				      class="badge bg-danger rounded-pill position-absolute  top-0 start-100 translate-middle">
                0
            </span>
			</a>

			<!-- Социальные сети и адрес из Restaurant -->
			<div class="header-social-links d-flex align-items-center gap-3">
				<!-- DEBUG: Restaurant={{ restaurant }}, Instagram={{ restaurant.instagram }}, Telegram={{ restaurant.telegram }}, Phone={{ restaurant.phone }} -->

				{% if restaurant %}
					{% if restaurant.instagram %}
					<a href="{{ restaurant.instagram }}" target="_blank" class="header-social-icon" aria-label="Instagram">
						<i class="fab fa-instagram"></i>
					</a>
					{% endif %}

					{% if restaurant.telegram %}
					<a href="{{ restaurant.telegram }}" target="_blank" class="header-social-icon" aria-label="Telegram">
						<i class="fab fa-telegram "></i>
					</a>
					{% endif %}

					{% if restaurant.phone %}
					<a href="tel:{{ restaurant.phone }}" class="header-social-icon" aria-label="Позвонить">
						<i class="fas fa-phone"></i>
					</a>
					{% endif %}
				{% else %}
					<!-- NO RESTAURANT DATA -->
				{% endif %}

				<a href="{% url 'menu' %}" class="menu-title m-0 text-dark d-none">
					<h2>Назад</h2>
				</a>
			</div>
		</div>
	</div>

	<!-- Список категорий -->
	<div class="categories mt-3">
		{% for category in categories %}
			<div class="category-card">
				<button class="category-btn" data-id="{{ category.id }}">
					<img src="{{ category.image.url }}" alt="{{ category.name }}">
					<span class="category-name">{{ category.name }}</span>
				</button>
			</div>
		{% empty %}
			<p class="text-center">Категории еще не добавлены.</p>
		{% endfor %}
	</div>


	<div id="message-container">
		<p id="message-text"></p>
	</div>

	<!-- Список блюд -->
	<div id="dishes" class="mt-4">

	</div>

	<!-- Пагинация -->
	<div id="pagination" class="mt-4 mb-5"></div>

	<!-- Модальное окно для изображения блюда -->
	<div class="modal fade" id="dishModal" tabindex="-1" aria-labelledby="dishModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
				</div>
				<div class="modal-body text-center">
					<img src="" id="modalDishImage" class="img-thumbnail w-100" alt="Блюдо">
				</div>
			</div>
		</div>
	</div>

	<!-- Footer section with your Instagram link -->
	<footer class="text-center border-top">
		<p class="mb-0">Created by
			<a href="https://www.instagram.com/__maxmudov/" target="_blank" class="text-primary text-decoration-none">Sanjar
				Maxmudov</a>
		</p>
	</footer>

{% endblock dashboard %}


<script src="{% static 'js/main.js' %}"></script>
</body>
</html>